<!DOCTYPE html>
<html xmlns="http://www.w3c.org/1999/xhtml" xml:lang='en' lang='en'>
	<head>
		<meta charset='utf-8'/>
		<link rel='stylesheet' type='text/css' href='typeplate.css'/>
		<link rel='stylesheet' type='text/css' href='style.css'/>
		<link rel='stylesheet' type='text/css' href='print.css' media='print'/>
		<meta name="generator" content="kramdown 1.3.3" />
		<title>Git collaboration guide</title>
	</head>
	<body>
		<h1 id="git-collaboration-guide">Git collaboration guide</h1>

<p>By <a href="http://svario.it/gioele">Gioele Barabucci</a>; additional information at <a href="http://svario.it/git-collab-guide">http://svario.it/git-collab-guide</a>.</p>

<p>There are many projects that are developed using git. However, many people
do not contribute to these projects because of git and its reputation as a
difficult tool. To be honest, git is a difficult tool, but if one focuses
only on its main features, it is possible to learn git and be productive
with it in few minutes.</p>

<p>This guide will show you how to use git to contribute to a fictitious
<code>fluffytron</code> project. We will set up our own copy of the <code>fluffytron</code>
repository then make some changes and see these modifications being
integrated back into the <code>fluffytron</code> project.</p>

<p><em>NOTE: this is a very opinated guide. It shows only one of the many
ways in which git can be used to collaborate on a project, does not use
100%-correct terminology and ignores many low-level details. Yet it
should provide a useful, down-to-earth, step-by-step guide for beginners.
More advanced users should read instead the <a href="http://git-scm.com/book">free ProGit book</a>.</em></p>

<h2 class="no_toc" id="the-steps">The steps</h2>

<ol id="markdown-toc">
  <li><a href="#first-we-need-a-fork">First, we need a fork</a></li>
  <li><a href="#putting-our-repository-in-contact-with-the-main-repository">Putting our repository in contact with the main repository</a></li>
  <li><a href="#update-to-align-to-the-main-repository">Update to align to the main repository</a></li>
  <li><a href="#a-separate-branch-for-our-changes">A separate branch for our changes</a></li>
  <li><a href="#our-first-commit">Our first commit</a></li>
  <li><a href="#publishing-our-change">Publishing our change</a></li>
  <li><a href="#lets-request-the-integration-of-our-changes">Let’s request the integration of our changes</a></li>
  <li><a href="#making-adjustments-to-a-published-branch">Making adjustments to a published branch</a></li>
  <li><a href="#after-the-change-has-been-accepted">After the change has been accepted</a></li>
</ol>

<h2 id="first-we-need-a-fork">First, we need a fork</h2>

<p>The project <code>fluffytron</code> is hosted on GitHub. We will also use GitHub to
store our own copy of the project.</p>

<p>In git parlance, each copy of the project is a “repository”. A repository
contains all the files of a project, plus much information about all the
changes that those files went through.</p>

<p>The URL of the <code>fluffytron</code> project is <a href="https://github.com/gioele/fluffytron">https://github.com/gioele/fluffytron</a>.</p>

<p>We cannot make any modification to that repository. All the modifications
we have to make them first in our copy of the repository and then ask the
project maintainers to ingrate them. In git terms, we need to “fork”
the main <code>fluffytron</code> repository.</p>

<p>To fork the main repository we use the GitHub interface.</p>

<ol>
  <li><img src="images/github/fork1.png" alt="Forking on GitHub, step 1" /></li>
  <li><img src="images/github/fork2.png" alt="Forking on GitHub, step 2" /></li>
  <li><img src="images/github/fork3.png" alt="Forking on GitHub, step 3" /></li>
</ol>

<p>With this procedure we told GitHub to copy the original <code>fluffytron</code>
repository from Gioele’s workspace to our workspace. Now we have
our own <code>fluffytron</code> repository available at <a href="https://github.com/git-learner/fluffytron">https://github.com/git-learner/fluffytron</a>.</p>

<p>To do any modification we need to clone this new repository onto our computer.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git clone https://github.com/git-learner/fluffytron.git</span>
Cloning into 'fluffytron'...
remote: Counting objects: 17, done.
remote: Compressing objects: 100% (12/12), done.
remote: Total 17 (delta 4), reused 17 (delta 4)
Unpacking objects: 100% (17/17), done.
Checking connectivity... done.
</code></pre>

<p>Git has now downloaded a copy of our own repository in a directory of our
computer. In git terms we just cloned our remote repository into our
local repository (It is slightly confusing, isn’t it? It will be clearer
later.)</p>

<p>Let’s move into this newly created directory and see what is inside it.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>cd fluffytron</span>
</code></pre>

<p>TODO: image directory contents</p>

<p>We have a new directory that contains all the files of the project plus a
special directory <code>.git</code> that contains all the history of the files and
other pieces of information. The directory as a whole is called the “local
repository”. When we take in consideration only the project files proper
(that is, the content of the directory excluding the <code>.git</code> directory) we
refer to at as the “working directory”.</p>

<h2 id="putting-our-repository-in-contact-with-the-main-repository">Putting our repository in contact with the main repository</h2>

<p>Before we can contribute anything, we have to make our repository “talk”
to the main repository. However, we just began and we already have quite
a bit of repositories to keep track of. Let’s pause for a second and have
a look at them.</p>

<p>We have three repositories at hand:</p>

<ul>
  <li>the main repository: <a href="https://github.com/gioele/fluffytron.git">https://github.com/gioele/fluffytron.git</a>;</li>
  <li>our remote repository on GitHub: <a href="https://github.com/git-learner/fluffytron.git">https://github.com/git-learner/fluffytron.git</a>;</li>
  <li>our local repository in our computer.</li>
</ul>

<p>We will operate mostly on our local repository, so, from now on we will
refer to “our local repository” simply as “our repository”.</p>

<p>Our repository is already linked to our remote repository. This allows the
changes we make to to our repository to be sent easily to the remote
repository when we are ready to publish them. The address of our remote
repository is stored in the repository configuration files as the “remote
location” called <code>origin</code> or, in git terms, as the <code>origin</code> remote.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git remote -v</span>
origin  https://github.com/git-learner/fluffytron.git (fetch)
origin  https://github.com/git-learner/fluffytron.git (push)
</code></pre>

<p>What we need to do now is to link our repository to the main <code>fluffytron</code>
repository. We do this adding a new remote. Usually this remote is named
<code>upstream</code> or after the person or the organization that manages it. In
this case we will try to be less formal and will call it “gioele”.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git remote add gioele https://github.com/gioele/fluffytron.git</span>
<span class="cmdline"><span class="prompt">$ </span>git fetch gioele</span>
From https://github.com/gioele/fluffytron
 * [new branch]      master     -&gt; gioele/master
</code></pre>

<p>We are now done with the setup and we can start making changes and ask
to have them integrated into the <code>fluffytron</code> project.</p>

<h2 id="update-to-align-to-the-main-repository">Update to align to the main repository</h2>

<p>Conceptually, the first thing to do before doing any change is to align
our repository to the main repository, to be certain of using the
current versions of the files.</p>

<p>In git one updates a repository by merging it with its master repository
using the “pull” operation.
We will use a particular kind of merge process called “fast-forward only”.
“Fast-forward only” in this context means that we want the merge process
to be completely automatic because we expect the integrator to take care
of all the intricacies of the git merging process.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git pull --ff-only gioele master</span>
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (1/1), done.
remote: Total 3 (delta 2), reused 3 (delta 2)
Unpacking objects: 100% (3/3), done.
From https://github.com/gioele/fluffytron
 * branch            master     -&gt; FETCH_HEAD
   f6661f5..6f94f76  master     -&gt; gioele/master
Updating f6661f5..6f94f76
Fast-forward
 fluffytron.js | 2 +-
 style.css | 2 ++
 2 file changed, 3 insertion(+), 1 deletion(-)
</code></pre>

<p>If anything goes wrong and the fast-forward merge cannot be done, you
should tell the maintainer: either they did something wrong (they will fix
that) or you did mess somehow (they will tell you how to sort things out).</p>

<p>Once the merge has been done, we publish the updated state of our
repository to show everybody that we are up to date with the main
repository.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git push</span>
Username for 'https://github.com': git-learner
Password for 'https://git-learner@github.com':
Counting objects: 13, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (10/10), done.
Writing objects: 100% (10/10), 1.15 KiB | 0 bytes/s, done.
Total 10 (delta 6), reused 0 (delta 0)
To https://github.com/git-learner/fluffytron.git
   f6661f5..6f94f76  master -&gt; master
</code></pre>

<h2 id="a-separate-branch-for-our-changes">A separate branch for our changes</h2>

<p>Before we start making changes, we need to make sure that our modifications
will not collide or pollute other people’s work.
In git this is done using separate branches.</p>

<p>A git branch is a copy of the working directory. You can think of
a branch as a “context”, different branches are used to separate
different working contexts. In every repository there is a main branch
called <code>master</code>. Project collaborators should never touch the <code>master</code>
branch, as it is meant to be used only by the project maintainers that
have (or should have) the technical knowledge and the expertise
required manage that branch.</p>

<p>Contributors should create a “feature branch” every time they want to
change something. In our case we want to change the color of the headings
of the <code>fluffytron</code> project; we create a new branch called <code>headings-color</code>
based on the <code>master</code> branch.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git branch headings-color</span>
</code></pre>

<p>Creating a branch is not enough, we also have to switch to it, so that
our modifications will be recorded in it instead of in the master branch.
Switching to a branch is called doing a “checkout” of that branch.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git checkout headings-color</span>
Switched to branch 'headings-color'
</code></pre>

<p>Please note that we did create a new branch now, but that branch exists
only in our local repository. We need to let the world know we did create
it. To do so, we need to publish the new branch on our remote repository.
In git publishing is done via “push” operations.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git push --set-upstream origin headings-color</span>
Username for 'https://github.com': git-learner
Password for 'https://git-learner@github.com':
Total 0 (delta 0), reused 0 (delta 0)
To https://github.com/git-learner/fluffytron.git
 * [new branch]      headings-color -&gt; headings-color
Branch headings-color set up to track remote branch headings-color from origin.
</code></pre>

<p>We are now ready to make our first change and publish it.</p>

<h2 id="our-first-commit">Our first commit</h2>

<p>We can now change the color of the headings to something more cool,
from black to red, and we can also change the font to Comic Sans.</p>

<p>TODO: picture CSS changes</p>

<p>This change has been saved in the working directory but has not been
recoded in the project history. To do so we need to “commit” our change.
To commit means to tell git that we did change some files and that we
want that changes recorded, accompanied by a short title that describes
the changes and an optional longer message that explains why we made
these changes. For such a simple modification we will use only the short
title “Make headings red and funny”.</p>

<pre><code># first we tell git that we changed some files
<span class="cmdline"><span class="prompt">$ </span>git add style.css</span>
# then we commit the changed files
<span class="cmdline"><span class="prompt">$ </span>git commit -m "Make the headings red and funny"</span>
[headings-color e0b326d] Make the headings red and funny
 1 file changed, 2 insertions(+)
</code></pre>

<h2 id="publishing-our-change">Publishing our change</h2>

<p>The commit we just created is sitting in the repository in our computer. Our
remote repository does not know about it, let alone the maintainers of
<code>fluffytron</code>.</p>

<p>So, it is time to publish our commit and then request its
integration in the main project.</p>

<p>The git way to publish a commit is pushing it to the remote repository,
exactly the same operation we did to to publish our new <code>headings-color</code>
branch. Please note that git cannot push single commits, only complete
branches. Thus, what we have to do now is to publish the new state of
our <code>headings-color</code> branch.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git push</span>
Username for 'https://github.com': git-learner
Password for 'https://git-learner@github.com':
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 344 bytes | 0 bytes/s, done.
Total 3 (delta 2), reused 0 (delta 0)
To https://github.com/git-learner/fluffytron.git
   f6661f5..e574d48  headings-color -&gt; headings-color
</code></pre>

<p>Please note that git knows where to publish this branch (in the branch
of the same name in the <code>origin</code> remote) because it remembers that
location from when we created and pushed the branch at the beginning.</p>

<p>We can have a look at the GitHub page and see that the changes are
indeed there. Nice.</p>

<ol>
  <li><img src="images/github/post-push1.png" alt="Branch log on GitHub, overview" /></li>
  <li><img src="images/github/post-push2.png" alt="Branch log on GitHub, branch selection" /></li>
  <li><img src="images/github/post-push3.png" alt="Branch log on GitHub, commit tab" /></li>
  <li><img src="images/github/post-push4.png" alt="Branch log on GitHub, list of commits" /></li>
</ol>

<h2 id="lets-request-the-integration-of-our-changes">Let’s request the integration of our changes</h2>

<p>With our <code>headings-color</code> branch published, we can now request its
integration in the main repository.</p>

<p>git doesn’t have a standard way to request the integration of external
changes; we will resort to using GitHub “pull requests”.</p>

<ol>
  <li><img src="images/github/pr1.png" alt="Making a new pull request on GitHub, step 1" /></li>
  <li><img src="images/github/pr2.png" alt="Making a new pull request on GitHub, step 2" /></li>
  <li><img src="images/github/pr3.png" alt="Making a new pull request on GitHub, step 3" /></li>
</ol>

<p>When we create a pull request, what happens is that GitHub creates for
us a new issue in the issue tracker of the <code>fluffytron</code> project. That
issue says that we have a branch called <code>headings-color</code>
and we would like to have it integrated into the main repository. In addition,
GitHub also sends some email(s) to the <code>fluffytron</code> maintainers to let them
know that there is a new pull request waiting to be integrated.</p>

<h2 id="making-adjustments-to-a-published-branch">Making adjustments to a published branch</h2>

<p>In these trying times, not every pull request gets accepted at the first
attempt. Sometimes the maintainers like most of the changes we submitted
but ask for some adjustments to be done.
In our case, the integrator does not fancy our use of Comic Sans: too
childish.</p>

<ol>
  <li><img src="images/github/comment1.png" alt="Comment to our pull request on GitHub, pull request page" /></li>
  <li><img src="images/github/comment2.png" alt="Comment to our pull request on GitHub, line notes" /></li>
</ol>

<p>So we go and change that to a more boring but more appropriate Helvetica.
What don’t you do to please these maintainers…</p>

<p>Before making any adjustment to our changes, we make sure that we are
still in the <code>headings-color</code> branch. (In the meantime we may have worked
on something else, so we could have switched to other branches.)</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git checkout headings-color</span>
Already on 'headings-color'
Your branch is up-to-date with 'origin/headings-color'.
</code></pre>

<p>Now we can proceed and make the adjustments that have been requested.</p>

<p>TODO: illustration of CSS changed to Helvetica</p>

<p>Just like before, we tell git about the changed files and make a commit.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git add style.css</span>
<span class="cmdline"><span class="prompt">$ </span>git commit -m "Helvetica is a more appropriate font"</span>
[headings-color 2ea5e8e] Helvetica is a more appropriate font
 1 file changed, 1 insertion(+), 1 deletion(-)
</code></pre>

<p>Again just like before, we push the <code>headings-color</code> branch to our remote
repository.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git push</span>
Username for 'https://github.com': git-learner
Password for 'https://git-learner@github.com':
Counting objects: 7, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 323 bytes | 0 bytes/s, done.
Total 3 (delta 2), reused 0 (delta 0)
To https://github.com/git-learner/fluffytron.git
   e0b326d..2ea5e8e  headings-color -&gt; headings-color
</code></pre>

<p>This is exactly what we have done for our first commit. The only difference
is that now we do not need to issue a new pull request. The original pull
request, being linked to the <code>headings-color</code> branch, has automatically
been updated to contain both the old and the new commit. The final result
is a combination of the two commits, as can be seen in the GitHub page for
the pull request.</p>

<ol>
  <li><img src="images/github/pr-update1.png" alt="Updated pull request on GitHub, new message" /></li>
  <li><img src="images/github/pr-update2.png" alt="Updated pull request on GitHub, new commit added" /></li>
  <li><img src="images/github/pr-update3.png" alt="Updated pull request on GitHub, changes in files" /></li>
</ol>

<h2 id="after-the-change-has-been-accepted">After the change has been accepted</h2>

<p>Finally, the integrators have accepted our changes and merged them into
the main repository. This can be seen clearly in the project history. See
the small bump ending in “Merged new heading styles from git-learner”?</p>

<p>TODO: image commit log</p>

<p>We must now do two things to consider our work done: deleting the
<code>headings-color</code> branch and update our repositories to reflect the
advances made by the <code>fluffytron</code> project.</p>

<p>We start deleting the <code>headings-color</code> branch because it is useless now
that has been integrated in the main repository.</p>

<p>We follow the GitHub suggestion to delete the branch…</p>

<ol>
  <li><img src="images/github/delete-branch1.png" alt="Delete merged branch on GitHub, step 1" /></li>
  <li><img src="images/github/delete-branch2.png" alt="Delete merged branch on GitHub, result" /></li>
</ol>

<p>…then we switch back to the master branch and remove the
<code>headings-color</code> branch from our repository.</p>

<pre><code><span class="cmdline"><span class="prompt">$ </span>git checkout master</span>
Switched to branch 'master'
Your branch is up-to-date with 'origin/master'.
<span class="cmdline"><span class="prompt">$ </span>git branch -D headings-color</span>
Deleted branch headings-color (was 2ea5e8e).
</code></pre>

<p>It is a good practice to also update our repository as explained in
“Update to align to the main repository”.
This reduces the chances of having problems during future updates.</p>

<p>We are done. Next time we want to submit a change we can skip all the
preparatory steps and start directly with the update of our master branch
and the creation of a new branch.</p>

<p>Good work!</p>

	</body>
</html>
